<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html;">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">

<title>Top Commodities by State</title>

<script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>
<script type="text/javascript" src="/localsite/js/earthscape.js" id="/localsite/js/earthscape.js"></script>
<link type="text/css" rel="stylesheet" href="https://unpkg.com/tabulator-tables/dist/css/tabulator.min.css">
<link type="text/css" rel="stylesheet" href="/localsite/css/base.css" id="/localsite/css/base.css">
<link type="text/css" rel="stylesheet" href="/localsite/css/base-tabulator.css" id="/localsite/css/base-tabulator.css">

<script type="text/javascript" src="/localsite/js/localsite.js?showheader=true&showsearch=true"></script>

<style>
hr {
	border: 0px solid #ddd;
	border-top: 1px solid #ddd;
}
.tabulator-cell {
	text-align: right;
}
.tabulator-cell:first-child {
	text-align: left;
	max-width: 510px;
}
</style>
<script>
document.addEventListener('hashChangeEvent', function (elem) {
    hashChangedEconomy();
}, false);
function renderTable(locationID, locationFile) {
	let my = {};
	let folderPath = "states/commodities/2020/";
	my.dataset = folderPath + locationFile;
	my.elementID = "earthscape1";
	// my.chartType = "timeline"; // Or chord, sankey, graph
	loadEarthScape(my);
	if (document.readyState !== 'loading') {
		const elem = document.getElementById("stateName");
		elem.textContent = locationID;
	} else {
		document.addEventListener("DOMContentLoaded", function(event) { // Doc Ready
			const elem = document.getElementById("stateName");
			elem.textContent = locationID;
		});
	}
}
let fileEnding = "EEIOv1.0-s-20.csv";
function initialLoad() {
	let locationID = "US";
	let hash = getHash();
	if (hash.state) {
		locationID = hash.state;
	}
	let locationFile = locationID + fileEnding;
	if (hash.state) {
		renderTable(locationID, locationFile);
 	} else {
 		renderTable("US", "USEEIOv2.0.1-411.csv"); 
 	}
}
initialLoad();
function hashChangedEconomy() {
	let hash = getHash();
	if (hash.state) {
		renderTable(hash.state, hash.state + fileEnding);
	} else {
		// To activate once USEEIOv2.0.1-411.csv generated.
		renderTable("US", "USEEIOv2.0.1-411.csv"); 
	}
}
</script>

</head>
<body>

<div style="position:relative;">
	<img src="../img/OR-Naics-7225-Biking-under-a-tree-canopy_xwide.jpg" style="width:100%">
	<style>
	#relocatedStateMenu #state_select {
		cursor: pointer;
		border-radius:24px;
		min-height:38px;
		line-height:16px;
		color: #555;
		appearance: none;
		max-width: 220px !important;
		padding: 15px 20px !important;
		font-size: 18px;
	}
	#relocatedStateMenu #state_select:hover {
		background-color: #fff	 !important;
	}
	</style>
	<div id="relocatedStateMenu" style="position:absolute;top:0;left:22px;margin:40px;padding-left:20px"></div>
</div>

<div class="content contentpadding">
	<span id="stateName"></span> - 
	<a href="#geoview=country" id="changeState">Change State</a>
	<div id="earthscape1" style="overflow-x: auto;"></div><br>

	<div id="readmeDiv"></div>
</div>

<script>
	loadMarkdown("README.md", "readmeDiv", "_parent");
</script>

</body>
</html>
